<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.trioshop.repository.mybatis.UserMapper">

    <select id="loginUser" resultType="UserInfoBySession">
        SELECT tuser.user_code userCode,
               tuser.grade_code gradeCode,
               tuser.user_id userId,
               tuser.user_passwd userPasswd,
               info.user_name userName,
               info.user_address userAddress,
               info.user_tel userTel,
               info.user_nickname userNickname
        FROM TRIO_USERS tuser, TRIO_USERS_INFO info
        WHERE tuser.user_code = info.user_code
          AND tuser.user_id = #{userId}
          AND tuser.user_passwd = #{userPasswd}
    </select>

    <select id="findId" resultType="UserInfoBySession">
        SELECT tuser.user_code userCode,
               tuser.grade_code gradeCode,
               tuser.user_id userId,
               tuser.user_passwd userPasswd,
               info.user_name userName,
               info.user_tel userTel,
               info.user_nickname userNickname
        FROM TRIO_USERS tuser, TRIO_USERS_INFO info
        WHERE tuser.user_code = info.user_code
          AND info.user_name = #{userName}
          AND info.user_tel = #{userTel}
    </select>

    <select id="findPw" resultType="UserInfoBySession">
        SELECT tuser.user_code userCode,
               tuser.grade_code gradeCode,
               tuser.user_id userId,
               tuser.user_passwd userPasswd,
               info.user_name userName,
               info.user_address userAddress,
               info.user_tel userTel,
               info.user_nickname userNickname
        FROM TRIO_USERS tuser, TRIO_USERS_INFO info
        WHERE tuser.user_code = info.user_code
          AND info.user_name = #{userName}
          AND tuser.user_id = #{userId}
    </select>

</mapper>
